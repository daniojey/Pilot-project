{% extends "base.html" %}
{% load static %}

{% block content %}
<head>
    <link rel="stylesheet" type='text/css' href="{% static "css/styles.css" %}">
</head>

<div align='left'>
    <button onclick="window.history.back();" aling='left'>Назад</button>
</div>


<div align="center">
    <div class='fixed-container'>
        {% if test.image %}
            <img src="{{ test.image.url }}" alt="{{ test.name }}" >
        {% endif %}
    </div>
    <h1>{{ test.name }}</h1>
    Время для прохождения - {{test.duration}}
    <div>
        <h2>Категория: {{ test.category }}</h2>
        <h3>Описание: {{ test.description }}</h3>
    </div>
    {% if user.is_authenticated %}
        {% if required_attemps %}
            <button id="start-test">Начать тестирование</button>
        {% else %}
            <p></p>
        {% endif %}
    {% else %}
        <h3><a href="{% url "users:login" %}">Войдите или зарегейстрируйтесь чтобы начать тест</a></h3>
    {% endif %}
</div>

<script>
    document.getElementById('start-test').onclick = function() {
        window.location.href = "{% url 'tests:take_test' test.id %}";
    };
</script>

{% if user.is_authenticated %}
<ul align='left'>
    <h2>Ваши результаты по этому тесту</h2>
    {% if test_results %}
        {% for result in test_results %}
            {% if test.id == result.test.id %}
                <li>{{ result.score }}% - {{ result.date_taken }}</li>
            {% endif %}
        {% endfor %}
    {% else %}
        <p>у вас ещё нет результатов по этому тесту</p>
    {% endif %}
</ul>
{% endif %}
 
{% endblock content %}

